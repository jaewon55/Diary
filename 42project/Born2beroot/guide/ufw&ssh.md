# UFW&SSH
### subject
#### UFW
+ UFW 방화벽으로 운영 체제를 구성해야하므로 포트 4242만 열어 두어야 한다.
+ virtual machine을 시작할 때 방화벽이 활성화 상태여야 한다. CentOS의 경우 기본 방화벽 대신 UFW를 사용해야 한다.
#### SSH
+ SSH서버는 4242 포트에서만 동작해야한다.
+ 보안상 이유로 SSH를 root로 사용해 접속해선 안된다.
+ SSH는 defense에서 새로운 계정을 생성함으로 테스트 된다.
****
### UFW
#### UFW?
+ **방화벽 : 서로 다른 네트워크를 지나는 데이터를 허용하거나 거부하거나 검열, 수정하는 하드웨어나 소프트웨어 장치. 일반적으로 신뢰할 수 있는 내부 네트워크(인트라넷)와 신뢰할 수 없는 외부 네트워크(인터넷)간의 장벽을 구성한다.**
+ **UFW(Uncmplicated FireWall) : 데비안 계열 및 다양한 리눅스 환경에서 작동되는 사용하기 쉬운 방화벽 관리 프로그램으로 간단한 명령 및 명령수가 적은 CLI를 사용한다.**

#### UFW 설치 및 설정
```
apt install ufw
```
+ **ufw 설치**
```
ufw status verbose
```
+ **현재 상태 확인**
```
ufw enable
```
+ **방화벽 활성화**
```
ufw allow 4242
```
+ **4242포트 허용**
****
### SSH
#### SSH?
+ **SSH(Secure SHell)는 네트워크 상의 다른 컴퓨터에 로그인 하거나 원격 시스템에서 명령을 실행하고 다른 시스템으로 파일을 복사할 수 있도록 해주는 응용프로그램 또는 프로토콜. 안전하지 못한 네트워크에서 안전하게 통신을 할 수 있는 기능을 제공하고 기본적으로 22번 포트를 사용한다.**
+ **ssh는 public key 와 private key가 한 쌍을 이루어 메세지를 암호화해서 전송한다.**
    + public key : 메세지를 암호화해서 전송이 가능하지만 복호화는 불가능 하다. 통신하고자 하는 컴퓨터에게 전송한다.
    + private key : 본인의 컴퓨터에 저장하고 쌍을 이루는 public key와 비교해 인증을 하고 암호화된 메세지를 복호화 가능하다.

#### SSH 설치 및 설정
```
systemctl status ssh
```
+ **ssh현재 상태 확인**
```
vim /etc/ssh/sshd_config
```
+ **ssh 설정파일 열기**
    + ssh설정파일은 sshd_config(서버) ssh_config(클라이언트) 두 개가 있다.
+ **Port는 4242 PermitRootLogin은 no로 설정**

#### ssh로 원격 접속(포트 포워딩)
 + **virtualbox의 설정->Network->PortForwarding에서 새로운 포트 포워딩 규칙 추가**
    + 호스트 포트 : 로컬에서 사용중이 아닌 포트 아무거나
    + 게스트 ip : 가상환경의 ip
    + 게스트 포트 : 가상환경의 포트 (subject에서는 특정 포트만 열어두니깐 해당 포트로 설정)
+ **가상환경에서 `hostname -I`명령으로 IP주소를 확인**
+ **로컬에서 `ssh [계정]@[로컬 ip 주소] -p [호스트 포트]`명령으로 가상환경 접속**
****